<!-- Reset Password -->
<mat-vertical-stepper linear #stepper>
    
    <!-- Email verification form -->
    <mat-step [stepControl]="emailVerificationFormGroup" [editable]="false">
        <form [formGroup]="emailVerificationFormGroup">
            <ng-template matStepLabel>Verify email address.</ng-template>
            <mat-form-field appearance="outline">
                <mat-label>Email Address</mat-label>
                <input matInput type="email" formControlName="email" required>
                <mat-error *ngIf="emailVerificationFormGroup.get('email')?.hasError('required')">Please add email address.</mat-error>
            </mat-form-field>
            <div><button mat-button matStepperNext (click)="verifyEmail()">Next</button></div>
        </form>
    </mat-step>
    
    <!-- Reset password form -->
    <mat-step [stepControl]="newPasswordFormGroup" [editable]="false">
        <form [formGroup]="newPasswordFormGroup">
            <ng-template matStepLabel>Reset Password</ng-template>
            <tr><td><mat-form-field appearance="outline">
                        <mat-label>Password</mat-label>
                        <input matInput type="password" formControlName="password" required>
                        <mat-error *ngIf="newPasswordFormGroup.get('password')?.hasError('required')">Please add password.</mat-error>
            </mat-form-field></td></tr>
            <tr><td><mat-form-field appearance="outline">
                <mat-label>Confirm Password</mat-label>
                <input matInput type="password" formControlName="confirmpassword" required>
                <mat-error *ngIf="newPasswordFormGroup.get('confirmpassword')?.hasError('required')">Please add confirm password.</mat-error>
            </mat-form-field></td></tr>
            <!-- Action -->
            <div>
                <button mat-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>

    <!-- Success Message -->
    <mat-step [stepControl]="newPasswordFormGroup" [editable]="false">
        <ng-template matStepLabel>Done</ng-template>
        Password changed successfully.
        <div style="margin-top:1vh"><button mat-button (click)="redirectToLogin()">Login</button></div>
    </mat-step>
</mat-vertical-stepper>
